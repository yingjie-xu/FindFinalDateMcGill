{"version":3,"sources":["table/filterDropdown.jsx"],"names":["React","ReactDOM","polyfill","Menu","SubMenu","Item","MenuItem","closest","classNames","shallowequal","Dropdown","Icon","Checkbox","Radio","FilterDropdownMenuWrapper","generateValueMaps","stopPropagation","e","nativeEvent","stopImmediatePropagation","FilterMenu","props","setNeverShown","column","rootNode","findDOMNode","filterBelongToScrollBody","neverShown","fixed","setSelectedKeys","selectedKeys","setState","handleClearFilters","handleConfirm","setVisible","confirmFilter","onVisibleChange","visible","filterDropdown","Function","handleMenuItemClick","info","state","keyPath","length","keyPathOfSelectedItem","indexOf","key","renderFilterIcon","locale","prefixCls","filtered","filterIcon","dropdownIconClass","getDropdownVisible","filterTitle","isValidElement","cloneElement","title","className","onClick","filterDropdownVisible","valueKeys","filters","prevProps","onFilterDropdownVisibleChange","some","item","children","propSelectedKeys","map","filter","undefined","items","dropdownPrefixCls","containSelected","Object","keys","value","subMenuCls","text","toString","renderMenus","renderMenuItem","multiple","filterMultiple","internalSelectedKeys","input","originSelectedKeys","getPopupContainer","dropdownMenuClass","hasSubMenu","confirm","clearFilters","menus","val","filterConfirm","filterReset","nextProps","prevState","newState","Component","defaultProps"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { polyfill } from 'react-lifecycles-compat';\nimport Menu, { SubMenu, Item as MenuItem } from 'rc-menu';\nimport closest from 'dom-closest';\nimport classNames from 'classnames';\nimport shallowequal from 'shallowequal';\nimport Dropdown from '../dropdown';\nimport Icon from '../icon';\nimport Checkbox from '../checkbox';\nimport Radio from '../radio';\nimport FilterDropdownMenuWrapper from './FilterDropdownMenuWrapper';\nimport { generateValueMaps } from './util';\nfunction stopPropagation(e) {\n    e.stopPropagation();\n    if (e.nativeEvent.stopImmediatePropagation) {\n        e.nativeEvent.stopImmediatePropagation();\n    }\n}\nclass FilterMenu extends React.Component {\n    constructor(props) {\n        super(props);\n        this.setNeverShown = (column) => {\n            const rootNode = ReactDOM.findDOMNode(this);\n            const filterBelongToScrollBody = !!closest(rootNode, `.ant-table-scroll`);\n            if (filterBelongToScrollBody) {\n                // When fixed column have filters, there will be two dropdown menus\n                // Filter dropdown menu inside scroll body should never be shown\n                // To fix https://github.com/ant-design/ant-design/issues/5010 and\n                // https://github.com/ant-design/ant-design/issues/7909\n                this.neverShown = !!column.fixed;\n            }\n        };\n        this.setSelectedKeys = ({ selectedKeys }) => {\n            this.setState({ selectedKeys: selectedKeys });\n        };\n        this.handleClearFilters = () => {\n            this.setState({\n                selectedKeys: [],\n            }, this.handleConfirm);\n        };\n        this.handleConfirm = () => {\n            this.setVisible(false);\n            // Call `setSelectedKeys` & `confirm` in the same time will make filter data not up to date\n            // https://github.com/ant-design/ant-design/issues/12284\n            this.setState({}, this.confirmFilter);\n        };\n        this.onVisibleChange = (visible) => {\n            this.setVisible(visible);\n            const { column } = this.props;\n            // https://github.com/ant-design/ant-design/issues/17833\n            if (!visible && !(column.filterDropdown instanceof Function)) {\n                this.confirmFilter();\n            }\n        };\n        this.handleMenuItemClick = (info) => {\n            const { selectedKeys } = this.state;\n            if (!info.keyPath || info.keyPath.length <= 1) {\n                return;\n            }\n            const { keyPathOfSelectedItem } = this.state;\n            if (selectedKeys && selectedKeys.indexOf(info.key) >= 0) {\n                // deselect SubMenu child\n                delete keyPathOfSelectedItem[info.key];\n            }\n            else {\n                // select SubMenu child\n                keyPathOfSelectedItem[info.key] = info.keyPath;\n            }\n            this.setState({ keyPathOfSelectedItem });\n        };\n        this.renderFilterIcon = () => {\n            const { column, locale, prefixCls, selectedKeys } = this.props;\n            const filtered = selectedKeys && selectedKeys.length > 0;\n            let filterIcon = column.filterIcon;\n            if (typeof filterIcon === 'function') {\n                filterIcon = filterIcon(filtered);\n            }\n            const dropdownIconClass = classNames({\n                [`${prefixCls}-selected`]: filtered,\n                [`${prefixCls}-open`]: this.getDropdownVisible(),\n            });\n            if (!filterIcon) {\n                return (<Icon title={locale.filterTitle} type=\"filter\" theme=\"filled\" className={dropdownIconClass} onClick={stopPropagation}/>);\n            }\n            if (React.isValidElement(filterIcon)) {\n                return React.cloneElement(filterIcon, {\n                    title: filterIcon.props.title || locale.filterTitle,\n                    className: classNames(`${prefixCls}-icon`, dropdownIconClass, filterIcon.props.className),\n                    onClick: stopPropagation,\n                });\n            }\n            return <span className={classNames(`${prefixCls}-icon`, dropdownIconClass)}>{filterIcon}</span>;\n        };\n        const visible = 'filterDropdownVisible' in props.column ? props.column.filterDropdownVisible : false;\n        this.state = {\n            selectedKeys: props.selectedKeys,\n            valueKeys: generateValueMaps(props.column.filters),\n            keyPathOfSelectedItem: {},\n            visible,\n            prevProps: props,\n        };\n    }\n    static getDerivedStateFromProps(nextProps, prevState) {\n        const { column } = nextProps;\n        const { prevProps } = prevState;\n        const newState = {\n            prevProps: nextProps,\n        };\n        /**\n         * if the state is visible the component should ignore updates on selectedKeys prop to avoid\n         * that the user selection is lost\n         * this happens frequently when a table is connected on some sort of realtime data\n         * Fixes https://github.com/ant-design/ant-design/issues/10289 and\n         * https://github.com/ant-design/ant-design/issues/10209\n         */\n        if ('selectedKeys' in nextProps &&\n            !shallowequal(prevProps.selectedKeys, nextProps.selectedKeys)) {\n            newState.selectedKeys = nextProps.selectedKeys;\n        }\n        if (!shallowequal((prevProps.column || {}).filters, (nextProps.column || {}).filters)) {\n            newState.valueKeys = generateValueMaps(nextProps.column.filters);\n        }\n        if ('filterDropdownVisible' in column) {\n            newState.visible = column.filterDropdownVisible;\n        }\n        return newState;\n    }\n    componentDidMount() {\n        const { column } = this.props;\n        this.setNeverShown(column);\n    }\n    componentDidUpdate() {\n        const { column } = this.props;\n        this.setNeverShown(column);\n    }\n    getDropdownVisible() {\n        return this.neverShown ? false : this.state.visible;\n    }\n    setVisible(visible) {\n        const { column } = this.props;\n        if (!('filterDropdownVisible' in column)) {\n            this.setState({ visible });\n        }\n        if (column.onFilterDropdownVisibleChange) {\n            column.onFilterDropdownVisibleChange(visible);\n        }\n    }\n    hasSubMenu() {\n        const { column: { filters = [] }, } = this.props;\n        return filters.some(item => !!(item.children && item.children.length > 0));\n    }\n    confirmFilter() {\n        const { column, selectedKeys: propSelectedKeys, confirmFilter } = this.props;\n        const { selectedKeys, valueKeys } = this.state;\n        const { filterDropdown } = column;\n        if (!shallowequal(selectedKeys, propSelectedKeys)) {\n            confirmFilter(column, filterDropdown\n                ? selectedKeys\n                : selectedKeys.map(key => valueKeys[key]).filter(key => key !== undefined));\n        }\n    }\n    renderMenus(items) {\n        const { dropdownPrefixCls, prefixCls } = this.props;\n        return items.map(item => {\n            if (item.children && item.children.length > 0) {\n                const { keyPathOfSelectedItem } = this.state;\n                const containSelected = Object.keys(keyPathOfSelectedItem).some(key => keyPathOfSelectedItem[key].indexOf(item.value) >= 0);\n                const subMenuCls = classNames(`${prefixCls}-dropdown-submenu`, {\n                    [`${dropdownPrefixCls}-submenu-contain-selected`]: containSelected,\n                });\n                return (<SubMenu title={item.text} popupClassName={subMenuCls} key={item.value.toString()}>\n            {this.renderMenus(item.children)}\n          </SubMenu>);\n            }\n            return this.renderMenuItem(item);\n        });\n    }\n    renderMenuItem(item) {\n        const { column } = this.props;\n        const { selectedKeys } = this.state;\n        const multiple = 'filterMultiple' in column ? column.filterMultiple : true;\n        // We still need trade key as string since Menu render need string\n        const internalSelectedKeys = (selectedKeys || []).map(key => key.toString());\n        const input = multiple ? (<Checkbox checked={internalSelectedKeys.indexOf(item.value.toString()) >= 0}/>) : (<Radio checked={internalSelectedKeys.indexOf(item.value.toString()) >= 0}/>);\n        return (<MenuItem key={item.value}>\n        {input}\n        <span>{item.text}</span>\n      </MenuItem>);\n    }\n    render() {\n        const { selectedKeys: originSelectedKeys } = this.state;\n        const { column, locale, prefixCls, dropdownPrefixCls, getPopupContainer } = this.props;\n        // default multiple selection in filter dropdown\n        const multiple = 'filterMultiple' in column ? column.filterMultiple : true;\n        const dropdownMenuClass = classNames({\n            [`${dropdownPrefixCls}-menu-without-submenu`]: !this.hasSubMenu(),\n        });\n        let { filterDropdown } = column;\n        if (filterDropdown instanceof Function) {\n            filterDropdown = filterDropdown({\n                prefixCls: `${dropdownPrefixCls}-custom`,\n                setSelectedKeys: (selectedKeys) => this.setSelectedKeys({ selectedKeys }),\n                selectedKeys: originSelectedKeys,\n                confirm: this.handleConfirm,\n                clearFilters: this.handleClearFilters,\n                filters: column.filters,\n                visible: this.getDropdownVisible(),\n            });\n        }\n        const menus = filterDropdown ? (<FilterDropdownMenuWrapper className={`${prefixCls}-dropdown`}>\n        {filterDropdown}\n      </FilterDropdownMenuWrapper>) : (<FilterDropdownMenuWrapper className={`${prefixCls}-dropdown`}>\n        <Menu multiple={multiple} onClick={this.handleMenuItemClick} prefixCls={`${dropdownPrefixCls}-menu`} className={dropdownMenuClass} onSelect={this.setSelectedKeys} onDeselect={this.setSelectedKeys} selectedKeys={originSelectedKeys && originSelectedKeys.map(val => val.toString())} getPopupContainer={getPopupContainer}>\n          {this.renderMenus(column.filters)}\n        </Menu>\n        <div className={`${prefixCls}-dropdown-btns`}>\n          <a className={`${prefixCls}-dropdown-link confirm`} onClick={this.handleConfirm}>\n            {locale.filterConfirm}\n          </a>\n          <a className={`${prefixCls}-dropdown-link clear`} onClick={this.handleClearFilters}>\n            {locale.filterReset}\n          </a>\n        </div>\n      </FilterDropdownMenuWrapper>);\n        return (<Dropdown trigger={['click']} placement=\"bottomRight\" overlay={menus} visible={this.getDropdownVisible()} onVisibleChange={this.onVisibleChange} getPopupContainer={getPopupContainer} forceRender>\n        {this.renderFilterIcon()}\n      </Dropdown>);\n    }\n}\nFilterMenu.defaultProps = {\n    column: {},\n};\npolyfill(FilterMenu);\nexport default FilterMenu;\n"],"file":"filterDropdown.js"}