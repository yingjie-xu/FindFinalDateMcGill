{"version":3,"sources":["input/ResizableTextArea.jsx"],"names":["React","polyfill","ResizeObserver","omit","classNames","calculateNodeHeight","raf","warning","ResizableTextArea","props","saveTextArea","textArea","resizeOnNextFrame","cancel","nextFrameActionId","resizeTextarea","autoSize","autosize","minRows","maxRows","textareaStyles","setState","resizing","resizeFrameId","renderTextArea","prefixCls","className","disabled","state","undefined","otherProps","cls","value","style","overflow","prevProps","Component"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { polyfill } from 'react-lifecycles-compat';\nimport ResizeObserver from 'rc-resize-observer';\nimport omit from 'omit.js';\nimport classNames from 'classnames';\nimport calculateNodeHeight from './calculateNodeHeight';\nimport raf from '../_util/raf';\nimport warning from '../_util/warning';\nclass ResizableTextArea extends React.Component {\n    constructor(props) {\n        super(props);\n        this.saveTextArea = (textArea) => {\n            this.textArea = textArea;\n        };\n        this.resizeOnNextFrame = () => {\n            raf.cancel(this.nextFrameActionId);\n            this.nextFrameActionId = raf(this.resizeTextarea);\n        };\n        this.resizeTextarea = () => {\n            const autoSize = this.props.autoSize || this.props.autosize;\n            if (!autoSize || !this.textArea) {\n                return;\n            }\n            const { minRows, maxRows } = autoSize;\n            const textareaStyles = calculateNodeHeight(this.textArea, false, minRows, maxRows);\n            this.setState({ textareaStyles, resizing: true }, () => {\n                raf.cancel(this.resizeFrameId);\n                this.resizeFrameId = raf(() => {\n                    this.setState({ resizing: false });\n                });\n            });\n        };\n        this.renderTextArea = () => {\n            const { prefixCls, autoSize, autosize, className, disabled } = this.props;\n            const { textareaStyles, resizing } = this.state;\n            warning(autosize === undefined, 'Input.TextArea', 'autosize is deprecated, please use autoSize instead.');\n            const otherProps = omit(this.props, [\n                'prefixCls',\n                'onPressEnter',\n                'autoSize',\n                'autosize',\n                'defaultValue',\n                'allowClear',\n            ]);\n            const cls = classNames(prefixCls, className, {\n                [`${prefixCls}-disabled`]: disabled,\n            });\n            // Fix https://github.com/ant-design/ant-design/issues/6776\n            // Make sure it could be reset when using form.getFieldDecorator\n            if ('value' in otherProps) {\n                otherProps.value = otherProps.value || '';\n            }\n            const style = Object.assign(Object.assign(Object.assign({}, this.props.style), textareaStyles), (resizing ? { overflow: 'hidden' } : null));\n            return (<ResizeObserver onResize={this.resizeOnNextFrame} disabled={!(autoSize || autosize)}>\n        <textarea {...otherProps} className={cls} style={style} ref={this.saveTextArea}/>\n      </ResizeObserver>);\n        };\n        this.state = {\n            textareaStyles: {},\n            resizing: false,\n        };\n    }\n    componentDidMount() {\n        this.resizeTextarea();\n    }\n    componentDidUpdate(prevProps) {\n        // Re-render with the new content then recalculate the height as required.\n        if (prevProps.value !== this.props.value) {\n            this.resizeTextarea();\n        }\n    }\n    componentWillUnmount() {\n        raf.cancel(this.nextFrameActionId);\n        raf.cancel(this.resizeFrameId);\n    }\n    render() {\n        return this.renderTextArea();\n    }\n}\npolyfill(ResizableTextArea);\nexport default ResizableTextArea;\n"],"file":"ResizableTextArea.js"}